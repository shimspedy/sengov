<script async src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script> -->
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.5.1/highlight.min.js"></script> -->
<script async src="{{.Site.BaseURL}}js/sticky-kit.min.js"></script>
<script async  src="{{.Site.BaseURL}}js/init.min.js"></script>

<script src="https://unpkg.com/web-vitals@3/dist/web-vitals.iife.js"></script>   
<script>
        function sendToGTM(name, delta, value, id) {
            ononline = dataLayer.push({
                event: 'web-vitals',
                event_category: 'Performance',
                event_action: name.name,
                event_value: Math.round(name.name === 'CLS' ? name.delta * 1000 : name.delta),
                event_label: name.id
            });
        }
        webVitals.getCLS(sendToGTM);
        webVitals.getFID(sendToGTM);
        webVitals.getLCP(sendToGTM);
        webVitals.getFCP(sendToGTM);
        webVitals.getTTFB(sendToGTM);


  function sendToGoogleAnalytics({name, delta, value, id}) {
  // Assumes the global `gtag()` function exists, see:
  // https://developers.google.com/analytics/devguides/collection/ga4
  gtag('event', name, {
    // Built-in params:
    value: delta, // Use `delta` so the value can be summed.
    // Custom params:
    metric_id: id, // Needed to aggregate events.
    metric_value: value, // Optional.
    metric_delta: delta, // Optional.

    // OPTIONAL: any additional params or debug info here.
    // See: https://web.dev/debug-performance-in-the-field/
    // metric_rating: 'good' | 'needs-improvement' | 'poor',
    // debug_info: '...',
    // ...
  });
}

webVitals.onCLS(sendToGoogleAnalytics);
webVitals.onFID(sendToGoogleAnalytics);
webVitals.onLCP(sendToGoogleAnalytics);
</script>